CREATE TABLE IF NOT EXISTS PharmacienDetail(
num_phar integer NOT NULL PRIMARY KEY AUTOINCREMENT,
identifiant VARCHAR(50) NOT NULL,
mdp VARCHAR(50) NOT NULL,
prenom_phar VARCHAR(50) NOT NULL,
nom_phar VARCHAR(50) NOT NULL,
statut_manager boolean NOT NULL);

INSERT INTO PharmacienDetail(num_phar,identifiant, mdp, prenom_phar, nom_phar, statut_manager) values (1, "admin", "admin", "laurent", "boyer", 1)

PRAGMA table_info(PharmacienDetail)
select * from PharmacienDetail


CREATE TABLE IF NOT EXISTS ProduitDetail (
num_prod integer NOT NULL PRIMARY KEY AUTOINCREMENT,
code_barre integer NOT NULL,
libelle_produit VARCHAR(100) NOT NULL,
id_cat int NOT NULL,
forme VARCHAR(50) NOT NULL,
qtte_stock integer NOT NULL,
qtte_stock_alarme integer NOT NULL,
prix_vente float NOT NULL,
prix_achat float NOT NULL,
id_four integer NOT NULL,
FOREIGN KEY (id_four) REFERENCES FournisseurDetail(id_four),
FOREIGN KEY (id_cat) REFERENCES Categorie (id_cat));

INSERT INTO ProduitDetail (num_prod, code_barre, libelle_produit, id_cat, forme, qtte_stock, qtte_stock_alarme, prix_vente, prix_achat, id_four) values (1, "0123456789", "Doliprane", 1, "Comprimé", 20, 21, 1.49, 1.02, 1)


CREATE TABLE IF NOT EXISTS Categorie (
id_cat integer NOT NULL PRIMARY KEY AUTOINCREMENT,
nom_cat VARCHAR(100) NOT NULL);

INSERT INTO Categorie (id_cat, nom_cat) values (1, "Douleur et fièvre")



CREATE TABLE IF NOT EXISTS FournisseurDetail(
id_four integer NOT NULL PRIMARY KEY AUTOINCREMENT,
raison_sociale VARCHAR(100) NOT NULL,
adresse_four VARCHAR(200) NOT NULL,
code_postal_four int NOT NULL,
ville_four VARCHAR(50) NOT NULL);

Insert into FournisseurDetail(id_four, raison_sociale, adresse_four, code_postal_four, ville_four)
values (1, "Sanofi France", "56 rue La Boetie", 75008, "Paris")

CREATE TABLE IF NOT EXISTS LigneTicket(
id_ligne integer NOT NULL PRIMARY KEY AUTOINCREMENT,
num_prod integer NOT NULL REFERENCES ProduitDetail(num_prod),
qtte_vendu interger NOT NULL,
montant_ligne float NOT NULL,
id_ticket integer NOT NULL REFERENCES Ticket(id_ticket)
);


CREATE TABLE IF NOT EXISTS Ticket(
id_ticket integer NOT NULL PRIMARY KEY AUTOINCREMENT,
libelle VARCHAR(30) NOT NULL,
montant_ticket float NOT NULL
);

libelle_produit VARCHAR(100) NOT NULL REFERENCES ProduitDetail(libelle_produit),
code_barre integer NOT NULL REFERENCES ProduitDetail(code_barre),
libelle_produit VARCHAR(100) NOT NULL REFERENCES ProduitDetail(libelle_produit),
prix_vente float NOT NULL REFERENCES ProduitDetail(prix_vente),

SELECT ProduitDetail.num_prod, ProduitDetail.code_barre, ProduitDetail.libelle_produit, Categorie.nom_cat as nom_cat, ProduitDetail.forme, ProduitDetail.qtte_stock, ProduitDetail.prix_vente, ProduitDetail.prix_achat, FournisseurDetail.raison_sociale as raison_sociale, ProduitDetail.qtte_stock_alarme FROM ProduitDetail INNER JOIN Categorie ON ProduitDetail.id_cat=Categorie.id_cat INNER JOIN FournisseurDetail ON ProduitDetail.id_four=FournisseurDetail.id_four ORDER BY ProduitDetail.num_prod COLLATE NOCASE